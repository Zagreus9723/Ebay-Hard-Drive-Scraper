<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta name="description" content="Find the best deals on hard drives on ebay with our detailed price comparison and filtering features. Sort by price, size, condition, and more.">
    <meta name="keywords" content="ebay hdd, ebay hard drives, hard drives, disk prices, price comparison, hard drive deals, HDD prices, filter hard drives">
    <meta name="author" content="EBay Drives">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Disk Prices - Compare Hard Drive Deals">
    <meta property="og:description" content="Quickly find the best hard drive deals with price per TB comparison, filters for free shipping, and more.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://discountdiskz.com">
    <meta property="og:image" content="https://discountdiskz/favicon.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Disk Prices - Compare Hard Drive Deals">
    <meta name="twitter:description" content="Find affordable hard drives on ebay with detailed price comparisons and filters.">
    <meta name="twitter:image" content="https://yourwebsite.com/twitter-image.jpg">
    <title>EBay Disk Prices</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            display: flex;
            flex-direction: row;
        }
        #content {
            flex: 3;
        }
        #filters {
            flex: 1;
            margin-left: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
            cursor: pointer;
        }
        a {
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        #filters {
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }
        #filters h3 {
            margin-top: 0;
        }
        .slider-container {
            margin: 10px 0;
        }
        .slider-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
        }
        .slider {
            width: 100%;
        }
        #conditionFilter label {
            display: block;
            margin: 5px 0;
        }
        button {
            margin-top: 15px;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            width: 100%;
        }
        button:hover {
            background-color: #0056b3;
        }

        th[data-sort] {
        position: relative;
        }

        th[data-sort] .sort-arrow {
            position: absolute;
            right: 10px;
            font-size: 12px;
        }

        th[data-sort].ascending .sort-arrow::after {
            content: '↑';
        }

        th[data-sort].descending .sort-arrow::after {
            content: '↓';
        }

        th[data-sort]:not(.ascending):not(.descending) .sort-arrow::after {
            content: '⇵';
        }
    </style>
</head>
<body>
    <div id="content">
        <h1>EBay Disk Prices - Compare Hard Drive Deals</h1>
        <p>Welcome to the ultimate destination for finding the best deals on hard drives on EBay. Use our filters and sorting options to find exactly what you need at the best price.</p>
        <table>
            <thead>
                <tr>
                    <th data-sort="title">Title <span class="sort-arrow"></span></th>
                    <th data-sort="price">Price (USD) <span class="sort-arrow"></span></th>
                    <th data-sort="size">Size (TB) <span class="sort-arrow"></span></th>
                    <th data-sort="price_per_tb">Price per TB (USD) <span class="sort-arrow"></span></th>
                    <th data-sort="condition">Condition <span class="sort-arrow"></span></th>
                    <th>Shipping</th>
                    <th>Link</th>
                </tr>
            </thead>
            <tbody id="diskTableBody"></tbody>
        </table>
    </div>
    <div id="filters">
        <h3>Advanced Filters</h3>
        <div class="slider-container">
            <div class="slider-label">
                <label for="minSize">Size (TB):</label>
                <span id="sizeValue">0 - 32</span>
            </div>
            <input type="range" id="minSize" class="slider" min="0" max="32" step="1" value="0">
            <input type="range" id="maxSize" class="slider" min="0" max="32" step="1" value="32">
        </div>

        <div class="slider-container">
            <div class="slider-label">
                <label for="minCost">Price (USD):</label>
                <span id="priceValue">$0 - $1000</span>
            </div>
            <input type="range" id="minCost" class="slider" min="0" max="1000" step="25" value="0">
            <input type="range" id="maxCost" class="slider" min="0" max="1000" step="25" value="1000">
        </div>

        <h4>Condition</h4>
        <div id="conditionFilter">
            <label><input type="checkbox" value="Brand New"> Brand New</label>
            <label><input type="checkbox" value="New (Other)"> New (Other)</label>
            <label><input type="checkbox" value="Open Box"> Open Box</label>
            <label><input type="checkbox" value="Certified - Refurbished"> Certified Refurbished</label>
            <label><input type="checkbox" value="Excellent - Refurbished"> Excellent Refurbished</label>
            <label><input type="checkbox" value="Good - Refurbished"> Good Refurbished</label>
            <label><input type="checkbox" value="Pre-Owned"> Pre-Owned</label>
            <label><input type="checkbox" value="Parts Only"> Parts Only</label>
        </div>

        <button id="applyFilters">Apply Filters</button>
    </div>

    <script>
        async function fetchData() {
            const response = await fetch('data.json'); // Replace with the path to your JSON file
            return response.json();
        }

        let diskData = [];
        let filteredData = [];
        let sortDirection = {}; // To track sort directions for each column

        function populateTable(data) {
            const tableBody = document.getElementById('diskTableBody');
            tableBody.innerHTML = '';

            data.forEach(disk => {
                const row = document.createElement('tr');

                row.innerHTML = `
                    <td>${disk.title}</td>
                    <td>$${parseFloat(disk.price).toFixed(2)}</td>
                    <td>${disk.size}</td>
                    <td>$${parseFloat(disk.price_per_tb).toFixed(2)}</td>
                    <td>${disk.condition}</td>
                    <td>${disk.shipping === 'Free' ? 'Free' : `$${parseFloat(disk.shipping || 0).toFixed(2)}`}</td>
                    <td><a href="${disk.url}" target="_blank">View</a></td>
                `;

                if (disk.size !== 0.0 && disk.price_per_tb !== 0.0) {
                    tableBody.appendChild(row);
                }
            });
        }

        function sortData(key) {
            // Toggle sort direction for the selected column
            if (!sortDirection[key]) sortDirection[key] = 'asc';
            else sortDirection[key] = sortDirection[key] === 'asc' ? 'desc' : 'asc';

            // Remove sort classes from all other headers
            document.querySelectorAll('th[data-sort]').forEach(th => {
                th.classList.remove('ascending', 'descending');
            });

            // Add the appropriate class to the current header
            const currentHeader = document.querySelector(`th[data-sort="${key}"]`);
            currentHeader.classList.add(sortDirection[key] === 'asc' ? 'ascending' : 'descending');

            // Sort the data
            filteredData.sort((a, b) => {
                let valA = a[key], valB = b[key];

                if (key === 'price' || key === 'price_per_tb' || key === 'shipping') {
                    valA = parseFloat(valA.toString().replace('$', '')) || 0;
                    valB = parseFloat(valB.toString().replace('$', '')) || 0;
                } else if (key === 'size') {
                    valA = parseFloat(valA) || 0;
                    valB = parseFloat(valB) || 0;
                }

                return sortDirection[key] === 'asc' ? valA - valB : valB - valA;
            });

            populateTable(filteredData);
        }

        // Add event listeners to each sortable column
        document.querySelectorAll('th[data-sort]').forEach(th => {
            th.addEventListener('click', () => {
                const key = th.getAttribute('data-sort');
                sortData(key);
            });
        });

        function updateSliderValues() {
            const minSize = document.getElementById('minSize').value;
            const maxSize = document.getElementById('maxSize').value;
            const minCost = document.getElementById('minCost').value;
            const maxCost = document.getElementById('maxCost').value;

            document.getElementById('sizeValue').textContent = `${minSize} - ${maxSize}`;
            document.getElementById('priceValue').textContent = `$${minCost} - $${maxCost}`;
        }

        function applyAdvancedFilters() {
            const minSize = parseFloat(document.getElementById('minSize').value) || 0;
            const maxSize = parseFloat(document.getElementById('maxSize').value) || Infinity;
            const minCost = parseFloat(document.getElementById('minCost').value) || 0;
            const maxCost = parseFloat(document.getElementById('maxCost').value) || Infinity;
            const selectedConditions = Array.from(document.querySelectorAll('#conditionFilter input:checked'))
                .map(checkbox => checkbox.value);

            filteredData = diskData.filter(disk => {
                const size = parseFloat(disk.size) || 0;
                const price = parseFloat(disk.price) || 0;

                return (
                    size >= minSize &&
                    size <= maxSize &&
                    price >= minCost &&
                    price <= maxCost &&
                    (selectedConditions.length === 0 || selectedConditions.includes(disk.condition))
                );
            });
            sortDirection = {};
            sortData('price_per_tb');
        }

        document.querySelectorAll('.slider').forEach(slider => {
            slider.addEventListener('input', updateSliderValues);
        });

        document.getElementById('applyFilters').addEventListener('click', applyAdvancedFilters);

        fetchData().then(data => {
            diskData = data;
            filteredData = [...diskData];
            sortData('price_per_tb');
        });
    </script>
</body>
</html>
